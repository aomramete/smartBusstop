from flask import Flask, request, jsonify
from flask_restful import Resource, Api
from math import sin, cos, sqrt, atan2, radians
import random
import json

app = Flask(__name__)
api = Api(app)

import requests
import time

def distance():
	R = 6373.0
	lat1 = radians(13.727154)
	lon1 = radians(100.774713)
	lat2 = radians(13.727208)
	lon2 = radians(100.776801)
	dlon = lon2 - lon1
	dlat = lat2 - lat1
	a = (sin(dlat/2))**2 + cos(lat1) * cos(lat2) * (sin(dlon/2))**2
	c = 2 * atan2(sqrt(a), sqrt(1-a))
	distance = R * c
	meter = distance*1000
	# Define speed and times
	speed = meter/300 # 300 is seconds (arriving in time)
	time = (meter/speed)/60
	return "Estimated arriving time: ", time

class stop_loca(Resource):
        def get(self):
                stop1_lat = 13.727154
                stop1_lon = 100.774713
                stop2_lat = 13.727208
                stop2_lon = 100.776801
                stop3_lat = 13.726471
                stop3_lon = 100.776849
                stop4_lat = 13.726429
                stop4_lon = 100.774671
                stop1 = 'Companies'
                stop2 = 'Gas Station'
                stop3 = 'Hospital'
                stop4 = 'Port'
                return jsonify([{'Bus stop' : stop1,'Lat': stop1_lat,'Lon': stop1_lon},{'Bus stop' : stop2,'Lat': $

class busstop(Resource):
	def get(self):
		R = 6373.0
        	lat1 = radians(13.727154)
        	lon1 = radians(100.774713)
        	lat2 = radians(13.727208)
        	lon2 = radians(100.776801)
        	dlon = lon2 - lon1
        	dlat = lat2 - lat1
        	a = (sin(dlat/2))**2 + cos(lat1) * cos(lat2) * (sin(dlon/2))**2
        	c = 2 * atan2(sqrt(a), sqrt(1-a))
        	distance = R * c
        	meter = distance*1000
        # Define speed and times
        	speed = meter/300 # 300 is seconds (arriving in time)
        	time = (meter/speed)/60
        #4	return "Estimated arriving time: ", time
		busstopno = 'no.2' 
		return jsonify({'Bus stop' : busstopno},{'Destination': 'Bus stop no.2'},{'Estimated arriving time (mins)': str(time)})

api.add_resource(busstop, '/')
api.add_resource(stop_loca, '/stoplocation')
if __name__ == '__main__':
     app.run(host = '0.0.0.0', port='8080', threaded=True, debug=True)
